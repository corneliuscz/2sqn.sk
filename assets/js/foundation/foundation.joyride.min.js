!function(t,i,e,s){"use strict";Foundation.libs.joyride={name:"joyride",version:"4.0.0",defaults:{tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookieExpires:365,tipContainer:"body",postRideCallback:function(){},postStepCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>'}},settings:{},init:function(i,e,s){return this.scope=i||this.scope,Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay"),"object"==typeof e?t.extend(!0,this.settings,this.defaults,e):t.extend(!0,this.settings,this.defaults,s),"string"!=typeof e?(this.settings.init||this.events(),this.settings.init):this[e].call(this,s)},events:function(){var e=this;t(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.joyride",".joyride-close-tip",function(t){t.preventDefault(),this.end()}.bind(this)),t(i).on("resize.fndtn.joyride",e.throttle(function(){t("[data-joyride]").length>0&&e.settings.$next_tip&&(e.is_phone()?e.pos_phone():e.pos_default())},100)),this.settings.init=!0},start:function(){var i=this,e=t(this.scope).find("[data-joyride]"),s=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],n=s.length;this.settings.init||this.init(),this.settings.$content_el=e,this.settings.body_offset=t(this.settings.tipContainer).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},"function"!=typeof t.cookie&&(this.settings.cookieMonster=!1),(!this.settings.cookieMonster||this.settings.cookieMonster&&null===t.cookie(this.settings.cookieName))&&(this.settings.$tip_content.each(function(e){var o=t(this);t.extend(!0,i.settings,i.data_options(o));for(var a=n-1;a>=0;a--)i.settings[s[a]]=parseInt(i.settings[s[a]],10);i.create({$li:o,index:e})}),!this.settings.startTimerOnClick&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init"))},resume:function(){this.set_li(),this.show()},tip_template:function(i){var e,s;return i.tip_class=i.tip_class||"",e=t(this.settings.template.tip).addClass(i.tip_class),s=t.trim(t(i.li).html())+this.button_text(i.button_text)+this.settings.template.link+this.timer_instance(i.index),e.append(t(this.settings.template.wrapper)),e.first().attr("data-index",i.index),t(".joyride-content-wrapper",e).append(s),e[0]},timer_instance:function(i){var e;return e=0===i&&this.settings.startTimerOnClick&&this.settings.timer>0||0===this.settings.timer?"":this.outerHTML(t(this.settings.template.timer)[0])},button_text:function(i){return this.settings.nextButton?(i=t.trim(i)||"Next",i=this.outerHTML(t(this.settings.template.button).append(i)[0])):i="",i},create:function(i){var e=i.$li.attr("data-button")||i.$li.attr("data-text"),s=i.$li.attr("class"),n=t(this.tip_template({tip_class:s,index:i.index,button_text:e,li:i.$li}));t(this.settings.tipContainer).append(n)},show:function(i){var e=null;this.settings.$li===s||-1===t.inArray(this.settings.$li.index(),this.settings.pauseAfter)?(this.settings.paused?this.settings.paused=!1:this.set_li(i),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(this.settings.tipSettings=t.extend(this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),e=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tipAnimation)?(e.width(0),thsi.settings.timer>0?(this.settings.$next_tip.show(),this.delay(function(){e.animate({width:e.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tipAnimation)&&(e.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show(),this.delay(function(){e.animate({width:e.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return Modernizr?Modernizr.mq("only screen and (max-width: 767px)")||t(".lt-ie9").length>0:this.settings.$window.width()<767?!0:!1},hide:function(){this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip),t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide()},set_li:function(t){t?(this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=t(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']"),this.settings.$next_tip.data("closed","")},set_target:function(){var i=this.settings.$li.attr("data-class"),s=this.settings.$li.attr("data-id"),n=function(){return s?t(e.getElementById(s)):i?t("."+i).first():t("body")};this.settings.$target=n()},scroll_to:function(){var e,s;e=t(i).height()/2,s=Math.ceil(this.settings.$target.offset().top-e+this.outerHeight(this.settings.$next_tip)),s>0&&this.scrollTo(t("html, body"),s,this.settings.scrollSpeed)},paused:function(){return-1===t.inArray(this.settings.$li.index()+1,this.settings.pauseAfter)?!0:!1},restart:function(){this.hide(),this.settings.$li=s,this.show("init")},pos_default:function(e){var s=(Math.ceil(t(i).height()/2),this.settings.$next_tip.offset(),this.settings.$next_tip.find(".joyride-nub")),n=Math.ceil(this.outerHeight(s)/2),o=e||!1;o&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(s):(this.bottom()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top+n+this.outerHeight(this.settings.$target),left:this.settings.$target.offset().left}),this.nub_position(s,this.settings.tipSettings.nubPosition,"top")):this.top()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-n,left:this.settings.$target.offset().left}),this.nub_position(s,this.settings.tipSettings.nubPosition,"bottom")):this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.outerWidth(this.settings.$target)+this.settings.$target.offset().left}),this.nub_position(s,this.settings.tipSettings.nubPosition,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-n}),this.nub_position(s,this.settings.tipSettings.nubPosition,"right")),!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length&&(s.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts],this.settings.attempts++,this.pos_default(!0))),o&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(i){var e=this.outerHeight(this.settings.$next_tip),s=(this.settings.$next_tip.offset(),this.outerHeight(this.settings.$target)),n=t(".joyride-nub",this.settings.$next_tip),o=Math.ceil(this.outerHeight(n)/2),a=i||!1;n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),a&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(n):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-e-o}),n.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+s+o}),n.addClass("top")),a&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(i){this.center(),i.hide(),this.settings.$next_tip.data("closed")||(t(".joyride-modal-bg").length<1&&t("body").append('<div class="joyride-modal-bg">').show(),/pop/i.test(this.settings.tipAnimation)?t(".joyride-modal-bg").show():t(".joyride-modal-bg").fadeIn(this.settings.tipAnimationFadeSpeed))},center:function(){var e=t(i);return this.settings.$next_tip.css({top:(e.height()-this.outerHeight(this.settings.$next_tip))/2+e.scrollTop(),left:(e.width()-this.outerWidth(this.settings.$next_tip))/2+this.scrollLeft(e)}),!0},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(e){var s=t(i),n=s.width()+this.scrollLeft(s),o=s.width()+s.scrollTop();return[e.offset().top<=s.scrollTop(),n<=e.offset().left+this.outerWidth(e),o<=e.offset().top+this.outerHeight(e),this.scrollLeft(s)>=e.offset().left]},visible:function(t){for(var i=t.length;i--;)if(t[i])return!1;return!0},nub_position:function(t,i,e){"auto"===i?t.addClass(e):t.addClass(i)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(){this.settings.cookieMonster&&t.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.$next_tip.data("closed",!0),t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip),this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip)},outerHTML:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)},off:function(){t(this.scope).off(".joyride"),t(i).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}}}}(Foundation.zj,this,this.document);