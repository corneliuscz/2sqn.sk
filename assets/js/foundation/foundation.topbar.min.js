!function(t,i){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.0.0",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",init:!1},init:function(e,s,n){var o=this;return this.scope=e||this.scope,"object"==typeof s&&t.extend(!0,this.settings,s),"string"!=typeof s?(t(".top-bar").each(function(){o.settings.$w=t(i),o.settings.$topbar=t(this),o.settings.$section=o.settings.$topbar.find("section"),o.settings.$titlebar=o.settings.$topbar.children("ul").first(),o.settings.$topbar.data("index",0);var e=t("<div class='top-bar-js-breakpoint'/>").insertAfter(o.settings.$topbar);o.settings.breakPoint=e.width(),e.remove(),o.assemble(),o.settings.$topbar.parent().hasClass("fixed")&&t("body").css("padding-top",o.outerHeight(o.settings.$topbar))}),o.settings.init||this.events(),this.settings.init):this[s].call(this,n)},events:function(){var e=this,s=this.outerHeight(t(".top-bar"));t(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(n){var o=t(this).closest(".top-bar"),a=o.find("section, .section");o.children("ul").first(),o.data("height")||e.largestUL(),n.preventDefault(),e.breakpoint()&&o.toggleClass("expanded").css("min-height",""),o.hasClass("expanded")||(a.css({left:"0%"}),a.find(">.name").css({left:"100%"}),a.find("li.moved").removeClass("moved"),o.data("index",0)),o.parent().hasClass("fixed")?(o.parent().removeClass("fixed"),t("body").css("padding-top","0"),i.scrollTo(0,0)):o.hasClass("fixed expanded")&&(o.parent().addClass("fixed"),t("body").css("padding-top",s))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(i){var s=t(this).closest(".top-bar"),n=s.find("section, .section"),o=s.children("ul").first();if((Modernizr.touch||e.breakpoint())&&i.preventDefault(),e.breakpoint()){var a=t(this),r=a.closest("li");s.data("index",s.data("index")+1),r.addClass("moved"),n.css({left:-(100*s.data("index"))+"%"}),n.find(">.name").css({left:100*s.data("index")+"%"}),a.siblings("ul").height(s.data("height")+e.outerHeight(o,!0)),s.css("min-height",s.data("height")+2*e.outerHeight(o,!0))}}),t(i).on("resize.fndtn.topbar",function(){this.breakpoint()||t(".top-bar").css("min-height","")}.bind(this)),t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(i){i.preventDefault();var e=t(this),s=e.closest(".top-bar"),n=s.find("section, .section"),o=e.closest("li.moved");o.parent(),s.data("index",s.data("index")-1),n.css({left:-(100*s.data("index"))+"%"}),n.find(">.name").css({left:100*s.data("index")+"%"}),0===s.data("index")&&s.css("min-height",0),setTimeout(function(){o.removeClass("moved")},300)})},breakpoint:function(){return t(i).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){var i=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var e=t(this),s=e.siblings(".dropdown"),n=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==i.settings.custom_back_text?n.find("h5>a").html("&laquo; "+i.settings.back_text):n.find("h5>a").html("&laquo; "+e.html()),s.prepend(n)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},largestUL:function(){var i=this.settings.$topbar.find("section ul ul"),e=i.first(),s=0,n=this;i.each(function(){t(this).children("li").length>e.children("li").length&&(e=t(this))}),e.children("li").each(function(){s+=n.outerHeight(t(this),!0)}),this.settings.$topbar.data("height",s)},sticky:function(){var e="."+this.settings.stickyClass;if(t(e).length>0){var s=t(e).length?t(e).offset().top:0,n=t(i),o=this.outerHeight(t(".top-bar"));n.scroll(function(){n.scrollTop()>=s?(t(e).addClass("fixed"),t("body").css("padding-top",o)):n.scrollTop()<s&&(t(e).removeClass("fixed"),t("body").css("padding-top","0"))})}},off:function(){t(this.scope).off(".fndtn.topbar"),t(i).off(".fndtn.topbar")}}}(Foundation.zj,this,this.document);